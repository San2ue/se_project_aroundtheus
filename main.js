!function(){"use strict";class e{constructor(e,t,s){this.name=e.name,this.image=e.link,this._cardSelector=t,this._handleZoomImage=s}_setEventListeners(){this._heartBtn.addEventListener("click",()=>{this._heartBtn.classList.toggle("cards__heart_active")}),this._removeBtn.addEventListener("click",()=>{this._cardElement.remove()}),this._cardImageElement.addEventListener("click",()=>{this._handleZoomImage({name:this.name,link:this.image})})}generateCard(){return this._cardElement=document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0),this._heartBtn=this._cardElement.querySelector(".cards__heart"),this._removeBtn=this._cardElement.querySelector(".cards__delete"),this._cardImageElement=this._cardElement.querySelector(".cards__image"),this._cardImageElement.src=this.image,this._cardImageElement.alt=this.name,this._cardElement.querySelector(".cards__title").textContent=this.name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitBtnSelector=e.submitBtnSelector,this._inactiveBtnClass=e.inactiveBtnClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputElements=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElements=this._form.querySelector(this._submitBtnSelector)}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){return!this._inputElements.every(e=>e.validity.valid)}toggleButtonState(){this._hasInvalidInput()?(this._buttonElements.classList.add(this._inactiveBtnClass),this._buttonElements.disabled=!0):(this._buttonElements.classList.remove(this._inactiveBtnClass),this._buttonElements.disabled=!1)}resetValidation(){this.toggleButtonState(),this._inputElements.forEach(e=>{this._hideInputError(e)})}_setEventListeners(){this._inputElements.forEach(e=>{e.addEventListener("input",()=>{this._checkInputValidity(e),this.toggleButtonState()})})}enableValidation(){this._setEventListeners()}}class s{constructor({popupSelector:e}){this._popupSelector=e,this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("modal_open"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_open"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",()=>{this.close()}),this._popupElement.addEventListener("mousedown",e=>{e.target.classList.contains("modal_open")&&this.close()})}}class n extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputList=[...this._popupForm.querySelectorAll(".modal__input")]}_getInputValues(){const e={};return this._inputList.forEach(t=>{e[t.name]=t.value}),e}close(){this._popupForm.reset(),super.close()}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})}}const r=document.querySelector(".profile__edit-button"),i=document.querySelector(".profile__add-content"),o=document.querySelector("#edit-modal"),a=document.forms["edit-form"],l=o.querySelector(".modal__name"),c=o.querySelector(".modal__description"),m=document.forms["add-card"],d=(m.querySelector(".modal__title"),m.querySelector(".modal__url"),document.querySelector(".cards__list")),u={inputSelector:".modal__input",submitBtnSelector:".modal__save",inactiveBtnClass:"modal__save_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};function _(t){return new e(t,"#card__template",S).generateCard()}const p=new class{constructor({items:e,renderer:t},s){this._item=e,this._renderer=t,this._classSection=s}renderItems(){this._item.forEach(e=>{this._renderer(e)})}addItem(e){this._classSection.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{p.addItem(_(e))}},d);p.renderItems();const h=new n("#edit-modal",function(e){const t=e.name,s=e.description;g.setUserInfo({name:t,description:s}),h.close(),console.log(e)});h.setEventListeners();const E=new n("#add-modal",function(e){const t=e.Title,s=e.url;p.addItem(_({name:t,link:s})),E.close(),L.resetValidation(),console.log(e)});E.setEventListeners();const v=new class extends s{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector("#modal-image"),this._previewImageTitle=this._popupElement.querySelector("#modal-image-title")}open({name:e,link:t}){this._previewImage.src=t,this._previewImage.alt=e,this._previewImageTitle.textContent=e,super.open()}}("#picture-modal");v.setEventListeners();const g=new class{constructor({name:e,description:t}){this._name=document.querySelector(e),this._description=document.querySelector(t)}getUserInfo(){return{name:this._name.textContent,description:this._description.textContent}}setUserInfo({name:e,description:t}){this._name.textContent=e,this._description.textContent=t}}({name:".profile__name",description:".profile__description"});function S({name:e,link:t}){v.open({name:e,link:t})}r.addEventListener("click",()=>{const e=g.getUserInfo();l.value=e.name,c.value=e.description,h.open(),y.resetValidation()}),i.addEventListener("click",()=>{E.open(),L.toggleButtonState()});const y=new t(u,a),L=new t(u,m);y.enableValidation(),L.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MkgsbUJBQW1CcEcsWUFBY3RCLEVBQ3RDNEUsTUFBTVgsTUFDUixHRmlDd0Msa0JBQzFDdUQsRUFBZWpELG9CQUdmLE1BQU15QyxFQUFXLElHcERGLE1BQ2JySCxXQUFBQSxFQUFZLEtBQUVLLEVBQUksWUFBRStHLElBQ2xCaEgsS0FBSzRILE1BQVE1RyxTQUFTQyxjQUFjaEIsR0FDcENELEtBQUs2SCxhQUFlN0csU0FBU0MsY0FBYytGLEVBQzdDLENBRUFjLFdBQUFBLEdBQ0UsTUFBTyxDQUNMN0gsS0FBTUQsS0FBSzRILE1BQU1yRyxZQUNqQnlGLFlBQWFoSCxLQUFLNkgsYUFBYXRHLFlBRW5DLENBRUEyRixXQUFBQSxFQUFZLEtBQUVqSCxFQUFJLFlBQUUrRyxJQUNsQmhILEtBQUs0SCxNQUFNckcsWUFBY3RCLEVBQ3pCRCxLQUFLNkgsYUFBYXRHLFlBQWN5RixDQUNsQyxHSG9DNEIsQ0FDNUIvRyxLQUFNLGlCQUNOK0csWUFBYSwwQkFNZixTQUFTakgsR0FBZ0IsS0FBRUUsRUFBSSxLQUFFRSxJQUMvQnNILEVBQWV2RCxLQUFLLENBQUVqRSxPQUFNRSxRQUM5QixDQXFCQW1GLEVBQWU5RSxpQkFBaUIsUUFBUyxLQUN2QyxNQUFNdUgsRUFBWWQsRUFBU2EsY0FDM0JuQyxFQUFVUixNQUFRNEMsRUFBVTlILEtBQzVCMkYsRUFBaUJULE1BQVE0QyxFQUFVZixZQUNuQ0YsRUFBaUI1QyxPQUNqQjhELEVBQWtCckUsb0JBR3BCNEIsRUFBYy9FLGlCQUFpQixRQUFTLEtBQ3RDNkcsRUFBYW5ELE9BQ2JzRCxFQUFrQi9ELHNCQUlwQixNQUFNdUUsRUFBb0IsSUFBSXhHLEVBQWN1RSxFQUFRTixHQUU5QytCLEVBQW9CLElBQUloRyxFQUFjdUUsRUFBUUYsR0FFcERtQyxFQUFrQm5FLG1CQUNsQjJELEVBQWtCM0Qsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcm91bmQtdGhlLXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9hcm91bmQtdGhlLXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9hcm91bmQtdGhlLXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kLXRoZS11cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vYXJvdW5kLXRoZS11cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kLXRoZS11cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9hcm91bmQtdGhlLXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9hcm91bmQtdGhlLXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kLXRoZS11cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vY29uc3Qgem9vbUltYWdlID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fem9vbVwiKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlWm9vbUltYWdlKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLmltYWdlID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlWm9vbUltYWdlID0gaGFuZGxlWm9vbUltYWdlO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faGVhcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGVhcnRCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRzX19oZWFydF9hY3RpdmVcIik7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9yZW1vdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVpvb21JbWFnZSh7IG5hbWU6IHRoaXMubmFtZSwgbGluazogdGhpcy5pbWFnZSB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICB0aGlzLl9oZWFydEJ0biA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2hlYXJ0XCIpO1xyXG4gICAgdGhpcy5fcmVtb3ZlQnRuID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fZGVsZXRlXCIpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5pbWFnZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gb3B0aW9ucy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuU2VsZWN0b3IgPSBvcHRpb25zLnN1Ym1pdEJ0blNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdG5DbGFzcyA9IG9wdGlvbnMuaW5hY3RpdmVCdG5DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IG9wdGlvbnMuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IG9wdGlvbnMuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudHMgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnRuU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JNc2dFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTXNnRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTXNnRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50cykge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnRzLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnRzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudHMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbGVtZW50cy5ldmVyeShcclxuICAgICAgKGlucHV0RWxlbWVudHMpID0+IGlucHV0RWxlbWVudHMudmFsaWRpdHkudmFsaWRcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50cy5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnRuQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50cy5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50cy5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnRuQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50cy5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5cIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlblwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5cIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IFsuLi50aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIildO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBmb3JtVmFsdWVzW2lucHV0RWxlbWVudC5uYW1lXSA9IGlucHV0RWxlbWVudC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBmb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbi8vIEVsZW1lbnRzXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtY29udGVudFwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcImVkaXQtZm9ybVwiXTtcclxuZXhwb3J0IGNvbnN0IG1vZGFsTmFtZSA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IG1vZGFsRGVzY3JpcHRpb24gPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIubW9kYWxfX2Rlc2NyaXB0aW9uXCIsXHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgYWRkRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiYWRkLWNhcmRcIl07XHJcbmV4cG9ydCBjb25zdCBtb2RhbFRpdGxlID0gYWRkRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX190aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IG1vZGFsTGluayA9IGFkZEZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fdXJsXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnRuU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlXCIsXHJcbiAgaW5hY3RpdmVCdG5DbGFzczogXCJtb2RhbF9fc2F2ZV9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIHByb2ZpbGVFZGl0QnRuLFxyXG4gIHByb2ZpbGVBZGRCdG4sXHJcbiAgcHJvZmlsZUZvcm0sXHJcbiAgbW9kYWxOYW1lLFxyXG4gIG1vZGFsRGVzY3JpcHRpb24sXHJcbiAgYWRkRm9ybSxcclxuICBtb2RhbFRpdGxlLFxyXG4gIG1vZGFsTGluayxcclxuICBjYXJkTGlzdCxcclxuICBjb25maWcsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuLy9pbXBvcnRzXHJcbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KERhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoRGF0YSwgXCIjY2FyZF9fdGVtcGxhdGVcIiwgaGFuZGxlWm9vbUltYWdlKTtcclxuXHJcbiAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbn1cclxuXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xyXG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGdldENhcmRFbGVtZW50KGRhdGEpKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBjYXJkTGlzdCxcclxuKTtcclxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbi8vRWRpdCBQcm9maWxlIFBvcHVwXHJcbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNlZGl0LW1vZGFsXCIsIHNhdmVQcm9maWxlKTtcclxuZWRpdFByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy9BZGQgTmV3IENhcmQgUG9wdXBcclxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjYWRkLW1vZGFsXCIsIHNhdmVDYXJkcyk7XHJcbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy9QcmV2aWV3IEltYWdlXHJcbmNvbnN0IHByZXZpZXdQaWN0dXJlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3BpY3R1cmUtbW9kYWxcIik7XHJcbnByZXZpZXdQaWN0dXJlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL1VzZXJJbmZvXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgZGVzY3JpcHRpb246IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbn0pO1xyXG5cclxuLy8gRnVuY3Rpb25zXHJcblxyXG4vL0NhcmQgSW1hZ2UgWm9vbVxyXG5mdW5jdGlvbiBoYW5kbGVab29tSW1hZ2UoeyBuYW1lLCBsaW5rIH0pIHtcclxuICBwcmV2aWV3UGljdHVyZS5vcGVuKHsgbmFtZSwgbGluayB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2F2ZVByb2ZpbGUocHJvZmlsZWRhdGEpIHtcclxuICBjb25zdCBuYW1lID0gcHJvZmlsZWRhdGEubmFtZTtcclxuICBjb25zdCBkZXNjcmlwdGlvbiA9IHByb2ZpbGVkYXRhLmRlc2NyaXB0aW9uO1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSk7XHJcbiAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpO1xyXG4gIGNvbnNvbGUubG9nKHByb2ZpbGVkYXRhKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2F2ZUNhcmRzKGRhdGEpIHtcclxuICBjb25zdCBuYW1lID0gZGF0YS5UaXRsZTtcclxuICBjb25zdCBsaW5rID0gZGF0YS51cmw7XHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShnZXRDYXJkRWxlbWVudCh7IG5hbWUsIGxpbmsgfSkpO1xyXG4gIG5ld0NhcmRQb3B1cC5jbG9zZSgpO1xyXG4gIGNhcmRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGNvbnNvbGUubG9nKGRhdGEpO1xyXG59XHJcblxyXG4vLyBMaXN0ZW5lcnNcclxuXHJcbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgdXNlcklucHV0ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBtb2RhbE5hbWUudmFsdWUgPSB1c2VySW5wdXQubmFtZTtcclxuICBtb2RhbERlc2NyaXB0aW9uLnZhbHVlID0gdXNlcklucHV0LmRlc2NyaXB0aW9uO1xyXG4gIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KTtcclxuXHJcbnByb2ZpbGVBZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBuZXdDYXJkUG9wdXAub3BlbigpO1xyXG4gIGNhcmRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbn0pO1xyXG5cclxuLy92YWxpZGF0b3JzXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwcm9maWxlRm9ybSk7XHJcblxyXG5jb25zdCBjYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgYWRkRm9ybSk7XHJcblxyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmNhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY2xhc3NTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbSA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NsYXNzU2VjdGlvbiA9IGNsYXNzU2VsZWN0b3I7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW0uZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jbGFzc1NlY3Rpb24ucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1pbWFnZVwiKTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZVRpdGxlID1cclxuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtaW1hZ2UtdGl0bGVcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lKTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvbik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVab29tSW1hZ2UiLCJ0aGlzIiwibmFtZSIsImltYWdlIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlWm9vbUltYWdlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2hlYXJ0QnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9yZW1vdmVCdG4iLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJfY2FyZEltYWdlRWxlbWVudCIsImdlbmVyYXRlQ2FyZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsIm9wdGlvbnMiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdG5TZWxlY3RvciIsInN1Ym1pdEJ0blNlbGVjdG9yIiwiX2luYWN0aXZlQnRuQ2xhc3MiLCJpbmFjdGl2ZUJ0bkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2lucHV0RWxlbWVudHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbkVsZW1lbnRzIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNc2dFbGVtZW50IiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsImVycm9yRWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJpbnB1dEVsZW1lbnRzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJldmVyeSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiZGlzYWJsZWQiLCJyZXNldFZhbGlkYXRpb24iLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dExpc3QiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtVmFsdWVzIiwidmFsdWUiLCJyZXNldCIsInByZXZlbnREZWZhdWx0IiwicHJvZmlsZUVkaXRCdG4iLCJwcm9maWxlQWRkQnRuIiwiZWRpdFByb2ZpbGVNb2RhbCIsInByb2ZpbGVGb3JtIiwiZm9ybXMiLCJtb2RhbE5hbWUiLCJtb2RhbERlc2NyaXB0aW9uIiwiYWRkRm9ybSIsImNhcmRMaXN0IiwiY29uZmlnIiwiZ2V0Q2FyZEVsZW1lbnQiLCJEYXRhIiwiY2FyZFNlY3Rpb24iLCJpdGVtcyIsInJlbmRlcmVyIiwiY2xhc3NTZWxlY3RvciIsIl9pdGVtIiwiX3JlbmRlcmVyIiwiX2NsYXNzU2VjdGlvbiIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImVkaXRQcm9maWxlUG9wdXAiLCJwcm9maWxlZGF0YSIsImRlc2NyaXB0aW9uIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsImNvbnNvbGUiLCJsb2ciLCJuZXdDYXJkUG9wdXAiLCJUaXRsZSIsInVybCIsImNhcmRGb3JtVmFsaWRhdG9yIiwicHJldmlld1BpY3R1cmUiLCJfcHJldmlld0ltYWdlIiwiX3ByZXZpZXdJbWFnZVRpdGxlIiwiX25hbWUiLCJfZGVzY3JpcHRpb24iLCJnZXRVc2VySW5mbyIsInVzZXJJbnB1dCIsImVkaXRGb3JtVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==