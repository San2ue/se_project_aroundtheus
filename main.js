!function(){"use strict";class e{constructor(e,t,s){this.name=e.name,this.image=e.link,this._cardSelector=t,this._handleZoomImage=s}_setEventListeners(){this._heartBtn.addEventListener("click",()=>{this._heartBtn.classList.toggle("cards__heart_active")}),this._removeBtn.addEventListener("click",()=>{this._cardElement.remove()}),this._cardImageElement.addEventListener("click",()=>{this._handleZoomImage({name:this.name,link:this.image})})}generateCard(){return this._cardElement=document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0),this._heartBtn=this._cardElement.querySelector(".cards__heart"),this._removeBtn=this._cardElement.querySelector(".cards__delete"),this._cardImageElement=this._cardElement.querySelector(".cards__image"),this._cardImageElement.src=this.image,this._cardImageElement.alt=this.name,this._cardElement.querySelector(".cards__title").textContent=this.name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitBtnSelector=e.submitBtnSelector,this._inactiveBtnClass=e.inactiveBtnClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputElements=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElements=this._form.querySelector(this._submitBtnSelector)}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){return!this._inputElements.every(e=>e.validity.valid)}toggleButtonState(){this._hasInvalidInput()?(this._buttonElements.classList.add(this._inactiveBtnClass),this._buttonElements.disabled=!0):(this._buttonElements.classList.remove(this._inactiveBtnClass),this._buttonElements.disabled=!1)}resetValidation(){this.toggleButtonState(),this._inputElements.forEach(e=>{this._hideInputError(e)})}_setEventListeners(){this._inputElements.forEach(e=>{e.addEventListener("input",()=>{this._checkInputValidity(e),this.toggleButtonState()})})}enableValidation(){this._setEventListeners()}}class s{constructor({popupSelector:e}){this._popupSelector=e,this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("modal_open"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_open"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",()=>{this.close()}),this._popupElement.addEventListener("mousedown",e=>{e.target.classList.contains("modal_open")&&this.close()})}}class n extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputList=[...this._popupForm.querySelectorAll(".modal__input")],this._submitBtn=this._popupElement.querySelector(".modal__save"),this._submitBtnText=this._submitBtn.textContent}_getInputValues(){const e={};return this._inputList.forEach(t=>{e[t.name]=t.value}),e}close(){this._popupForm.reset(),super.close()}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})}renderLoading(e,t="Saving..."){this._submitBtn.textContent=e?t:this._submitBtnText}}const i=document.querySelector(".profile__edit-button"),r=document.querySelector(".profile__add-content"),o=document.querySelector("#edit-modal"),a=document.forms["edit-form"],l=o.querySelector(".modal__name"),c=o.querySelector(".modal__description"),m=document.forms["add-card"],d=(m.querySelector(".modal__title"),m.querySelector(".modal__url"),document.querySelector(".cards__list")),u={inputSelector:".modal__input",submitBtnSelector:".modal__save",inactiveBtnClass:"modal__save_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};function _(t){return new e(t,"#card__template",S).generateCard()}const p=new class{constructor({items:e,renderer:t},s){this._item=e,this._renderer=t,this._classSection=s}renderItems(){this._item.forEach(e=>{this._renderer(e)})}addItem(e){this._classSection.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{p.addItem(_(e))}},d);p.renderItems();const h=new n("#edit-modal",function(e){const t=e.name,s=e.description;g.setUserInfo({name:t,description:s}),h.close(),console.log(e)});h.setEventListeners();const E=new n("#add-modal",function(e){const t=e.Title,s=e.url;p.addItem(_({name:t,link:s})),E.close(),L.resetValidation(),console.log(e)});E.setEventListeners();const v=new class extends s{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector("#modal-image"),this._previewImageTitle=this._popupElement.querySelector("#modal-image-title")}open({name:e,link:t}){this._previewImage.src=t,this._previewImage.alt=e,this._previewImageTitle.textContent=e,super.open()}}("#picture-modal");v.setEventListeners();const g=new class{constructor({name:e,description:t}){this._name=document.querySelector(e),this._description=document.querySelector(t)}getUserInfo(){return{name:this._name.textContent,description:this._description.textContent}}setUserInfo({name:e,description:t}){this._name.textContent=e,this._description.textContent=t}}({name:".profile__name",description:".profile__description"});function S({name:e,link:t}){v.open({name:e,link:t})}i.addEventListener("click",()=>{const e=g.getUserInfo();l.value=e.name,c.value=e.description,h.open(),y.resetValidation()}),r.addEventListener("click",()=>{E.open(),L.toggleButtonState()});const y=new t(u,a),L=new t(u,m);y.enableValidation(),L.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFvQixJQUFJckcsRUFBYzRFLEVBQVFGLEdBRXBEbUMsRUFBa0J4RSxtQkFDbEJnRSxFQUFrQmhFLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXJvdW5kLXRoZS11cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kLXRoZS11cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kLXRoZS11cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL2Fyb3VuZC10aGUtdXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL2Fyb3VuZC10aGUtdXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL2Fyb3VuZC10aGUtdXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYXJvdW5kLXRoZS11cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYXJvdW5kLXRoZS11cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL2Fyb3VuZC10aGUtdXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvL2NvbnN0IHpvb21JbWFnZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX3pvb21cIik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZVpvb21JbWFnZSkge1xyXG4gICAgdGhpcy5uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5pbWFnZSA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZVpvb21JbWFnZSA9IGhhbmRsZVpvb21JbWFnZTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2hlYXJ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hlYXJ0QnRuLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkc19faGVhcnRfYWN0aXZlXCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fcmVtb3ZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVab29tSW1hZ2UoeyBuYW1lOiB0aGlzLm5hbWUsIGxpbms6IHRoaXMuaW1hZ2UgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgdGhpcy5faGVhcnRCdG4gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19oZWFydFwiKTtcclxuICAgIHRoaXMuX3JlbW92ZUJ0biA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2RlbGV0ZVwiKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuaW1hZ2U7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMubmFtZTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IG9wdGlvbnMuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0blNlbGVjdG9yID0gb3B0aW9ucy5zdWJtaXRCdG5TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnRuQ2xhc3MgPSBvcHRpb25zLmluYWN0aXZlQnRuQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBvcHRpb25zLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBvcHRpb25zLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcblxyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnRzID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ0blNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yTXNnRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1zZ0VsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1zZ0VsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudHMpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50cy52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50cyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnRzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxlbWVudHMuZXZlcnkoXHJcbiAgICAgIChpbnB1dEVsZW1lbnRzKSA9PiBpbnB1dEVsZW1lbnRzLnZhbGlkaXR5LnZhbGlkXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudHMuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ0bkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudHMuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudHMuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ0bkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudHMuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yID0gcG9wdXBTZWxlY3RvcjtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5cIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0biA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuVGV4dCA9IHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgZm9ybVZhbHVlc1tpbnB1dEVsZW1lbnQubmFtZV0gPSBpbnB1dEVsZW1lbnQudmFsdWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdG5UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbi8vIEVsZW1lbnRzXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtY29udGVudFwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcImVkaXQtZm9ybVwiXTtcclxuZXhwb3J0IGNvbnN0IG1vZGFsTmFtZSA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IG1vZGFsRGVzY3JpcHRpb24gPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIubW9kYWxfX2Rlc2NyaXB0aW9uXCIsXHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgYWRkRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiYWRkLWNhcmRcIl07XHJcbmV4cG9ydCBjb25zdCBtb2RhbFRpdGxlID0gYWRkRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX190aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IG1vZGFsTGluayA9IGFkZEZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fdXJsXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnRuU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlXCIsXHJcbiAgaW5hY3RpdmVCdG5DbGFzczogXCJtb2RhbF9fc2F2ZV9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9BUEkuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIHByb2ZpbGVFZGl0QnRuLFxyXG4gIHByb2ZpbGVBZGRCdG4sXHJcbiAgcHJvZmlsZUZvcm0sXHJcbiAgbW9kYWxOYW1lLFxyXG4gIG1vZGFsRGVzY3JpcHRpb24sXHJcbiAgYWRkRm9ybSxcclxuICBtb2RhbFRpdGxlLFxyXG4gIG1vZGFsTGluayxcclxuICBjYXJkTGlzdCxcclxuICBjb25maWcsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuLy9pbXBvcnRzXHJcbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KERhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoRGF0YSwgXCIjY2FyZF9fdGVtcGxhdGVcIiwgaGFuZGxlWm9vbUltYWdlKTtcclxuXHJcbiAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbn1cclxuXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xyXG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGdldENhcmRFbGVtZW50KGRhdGEpKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBjYXJkTGlzdCxcclxuKTtcclxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbi8vRWRpdCBQcm9maWxlIFBvcHVwXHJcbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNlZGl0LW1vZGFsXCIsIHNhdmVQcm9maWxlKTtcclxuZWRpdFByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy9BZGQgTmV3IENhcmQgUG9wdXBcclxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjYWRkLW1vZGFsXCIsIHNhdmVDYXJkcyk7XHJcbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy9QcmV2aWV3IEltYWdlXHJcbmNvbnN0IHByZXZpZXdQaWN0dXJlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3BpY3R1cmUtbW9kYWxcIik7XHJcbnByZXZpZXdQaWN0dXJlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL1VzZXJJbmZvXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgZGVzY3JpcHRpb246IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbn0pO1xyXG5cclxuLy8gRnVuY3Rpb25zXHJcblxyXG4vL0NhcmQgSW1hZ2UgWm9vbVxyXG5mdW5jdGlvbiBoYW5kbGVab29tSW1hZ2UoeyBuYW1lLCBsaW5rIH0pIHtcclxuICBwcmV2aWV3UGljdHVyZS5vcGVuKHsgbmFtZSwgbGluayB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2F2ZVByb2ZpbGUocHJvZmlsZWRhdGEpIHtcclxuICBjb25zdCBuYW1lID0gcHJvZmlsZWRhdGEubmFtZTtcclxuICBjb25zdCBkZXNjcmlwdGlvbiA9IHByb2ZpbGVkYXRhLmRlc2NyaXB0aW9uO1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSk7XHJcbiAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpO1xyXG4gIGNvbnNvbGUubG9nKHByb2ZpbGVkYXRhKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2F2ZUNhcmRzKGRhdGEpIHtcclxuICBjb25zdCBuYW1lID0gZGF0YS5UaXRsZTtcclxuICBjb25zdCBsaW5rID0gZGF0YS51cmw7XHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShnZXRDYXJkRWxlbWVudCh7IG5hbWUsIGxpbmsgfSkpO1xyXG4gIG5ld0NhcmRQb3B1cC5jbG9zZSgpO1xyXG4gIGNhcmRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGNvbnNvbGUubG9nKGRhdGEpO1xyXG59XHJcblxyXG4vLyBMaXN0ZW5lcnNcclxuXHJcbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgdXNlcklucHV0ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBtb2RhbE5hbWUudmFsdWUgPSB1c2VySW5wdXQubmFtZTtcclxuICBtb2RhbERlc2NyaXB0aW9uLnZhbHVlID0gdXNlcklucHV0LmRlc2NyaXB0aW9uO1xyXG4gIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KTtcclxuXHJcbnByb2ZpbGVBZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBuZXdDYXJkUG9wdXAub3BlbigpO1xyXG4gIGNhcmRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbn0pO1xyXG5cclxuLy92YWxpZGF0b3JzXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwcm9maWxlRm9ybSk7XHJcblxyXG5jb25zdCBjYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgYWRkRm9ybSk7XHJcblxyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmNhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY2xhc3NTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbSA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NsYXNzU2VjdGlvbiA9IGNsYXNzU2VsZWN0b3I7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW0uZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jbGFzc1NlY3Rpb24ucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1pbWFnZVwiKTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZVRpdGxlID1cclxuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtaW1hZ2UtdGl0bGVcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lKTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvbik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVab29tSW1hZ2UiLCJ0aGlzIiwibmFtZSIsImltYWdlIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlWm9vbUltYWdlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2hlYXJ0QnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9yZW1vdmVCdG4iLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJfY2FyZEltYWdlRWxlbWVudCIsImdlbmVyYXRlQ2FyZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsIm9wdGlvbnMiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdG5TZWxlY3RvciIsInN1Ym1pdEJ0blNlbGVjdG9yIiwiX2luYWN0aXZlQnRuQ2xhc3MiLCJpbmFjdGl2ZUJ0bkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2lucHV0RWxlbWVudHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbkVsZW1lbnRzIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNc2dFbGVtZW50IiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsImVycm9yRWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJpbnB1dEVsZW1lbnRzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJldmVyeSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiZGlzYWJsZWQiLCJyZXNldFZhbGlkYXRpb24iLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dExpc3QiLCJfc3VibWl0QnRuIiwiX3N1Ym1pdEJ0blRleHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtVmFsdWVzIiwidmFsdWUiLCJyZXNldCIsInByZXZlbnREZWZhdWx0IiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwicHJvZmlsZUVkaXRCdG4iLCJwcm9maWxlQWRkQnRuIiwiZWRpdFByb2ZpbGVNb2RhbCIsInByb2ZpbGVGb3JtIiwiZm9ybXMiLCJtb2RhbE5hbWUiLCJtb2RhbERlc2NyaXB0aW9uIiwiYWRkRm9ybSIsImNhcmRMaXN0IiwiY29uZmlnIiwiZ2V0Q2FyZEVsZW1lbnQiLCJEYXRhIiwiY2FyZFNlY3Rpb24iLCJpdGVtcyIsInJlbmRlcmVyIiwiY2xhc3NTZWxlY3RvciIsIl9pdGVtIiwiX3JlbmRlcmVyIiwiX2NsYXNzU2VjdGlvbiIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImVkaXRQcm9maWxlUG9wdXAiLCJwcm9maWxlZGF0YSIsImRlc2NyaXB0aW9uIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsImNvbnNvbGUiLCJsb2ciLCJuZXdDYXJkUG9wdXAiLCJUaXRsZSIsInVybCIsImNhcmRGb3JtVmFsaWRhdG9yIiwicHJldmlld1BpY3R1cmUiLCJfcHJldmlld0ltYWdlIiwiX3ByZXZpZXdJbWFnZVRpdGxlIiwiX25hbWUiLCJfZGVzY3JpcHRpb24iLCJnZXRVc2VySW5mbyIsInVzZXJJbnB1dCIsImVkaXRGb3JtVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==